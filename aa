import json
import boto3

def lambda_handler(event, context):
    bedrock_runtime = boto3.client(service_name='bedrock-runtime', region_name='us-east-1')

    model_id = 'amazon.nova-lite-v1:0'  # Novalite (Chatモデル)

    user_message = {
        "role": "user",
        "content": [
            {
                "text": event.get("message", "")
            }
        ]
    }

    body = json.dumps({
        "messages": [user_message]
    })

    response = bedrock_runtime.invoke_model(body=body, modelId=model_id)
    response_body = json.loads(response.get('body').read())

    return {
        'statusCode': 200,
        'body': response_body
    }
